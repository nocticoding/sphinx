var config = 
{
    "LANGUAGES": {
        1: "es",
        2: "en",
        3: "pt"
    },
    "TIME_FOR_RELOAD": 3000,
    "TOTAL_QUESTIONS": 10,
    "UNANSWERED_QUESTIONS_TOTAL": 3,
    "FULL_DASH_ARRAY": 189,
    "TIME_LIMIT": 10,
};

var allQuestionsFromQuiz = 
{
    "es": [
        {
            "question": "¿De dónde proceden los judíos?",
            "answers": [
                "Del Próximo Oriente.",
                "De Egipto.",
                "De Sinaí."
            ],
            "correctAnswer": "1",
        },
        {
            "question":"¿Qué nombre recibe el éxodo judío tras la destrucción del segundo templo de Jerusalém?",
            "answers": [
                "La Diáspora Romana.",
                "La Segunda Diáspora.",
                "La Diáspora de Babilonia."
            ], 
            "correctAnswer":"2",
        },
        {
            "question": "¿En qué ciudad se encontró la primera prueba epigráfica de la presencia judía en España? ",
            "answers": [
                "En Adra.",
                "En Tortosa.",
                "En Mérida, en la lápida de un judío llamado Iustinus."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "¿Desde qué siglo existía ya una importante comunidad judía en España coexistiendo con la cristiana? ",
            "answers": [
                "Siglo II.",
                "Desde el siglo IV.",
                "Siglo V."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Qué significa el término Sefarad? ",
            "answers": [
                "Es el nombre con el que los hispanojudíos llamaban a la península ibérica. ",
                "Significa tierra.",
                "Significa separados (de su patria)."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Cuándo se promulgaron las primeras medidas y prohibiciones contra los judíos?",
            "answers": [
                "En el siglo VIII. ",
                "En la época de los Reyes Católicos.",
                "En época visigoda."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "¿Los musulmanes permitieron a los judíos conservar su religión, usos y costumbres?",
            "answers": [
                "Les han impuesto duras condiciones.",
                "Si.",
                "No."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿En cuál de estas ciudades existen dos bellas sinagogas judías? ",
            "answers": [
                "Toledo.",
                "Segovia.",
                "Córdoba."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Qué nombre reciben los barrios judíos?",
            "answers": [
                "Gueto.",
                "Judería.",
                "Aljamas."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Qué medidas tomaron los primeros reyes cristianos respecto a los judíos?",
            "answers": [
                "Les obligaban a llevar otra vestimenta.",
                "Tenían que vivir fuera de ciudad amurallada.",
                "Los protegieron, considerándolos incluso como propiedad real."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "¿En qué año se produjeron las persecuciones que arrasaron muchas juderías? ",
            "answers": [
                "En 1291.",
                "En 1483.",
                "En 1391."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "¿Cómo eran conocidos aquellos judíos acusados de no haberse convertido verdaderamente al cristianismo? ",
            "answers": [
                "Falsos conversos.",
                "Marranos.",
                "Nuevos cristianos."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿En qué año tuvo lugar el Edicto de Expulsión de los Reyes Católicos? ",
            "answers": [
                "En 1482.",
                "En 1492.",
                "En 1391."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Cuál de estas localidades portuguesas acogió a un gran número de judíos tras su expulsión de España? ",
            "answers": [
                "Lisboa.",
                "Castelo de Vide. ",
                "Guarda."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Cuántas veces al día rezan los judíos? ",
            "answers": [
                "Tres.",
                "Dos.",
                "Una."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Qué aspectos trata el Talmud? ",
            "answers": [
                "Explica la Biblia.",
                "Solo los aspectos de la vida religiosa judía.",
                "Contempla y regula los aspectos cotidianos de la vida judía."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "¿Qué nombre reciben los alimentos prohibidos por los judíos? ",
            "answers": [
                "Kosher",
                "Taref.",
                "Asúr."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Qué nombre reciben los alimentos permitidos por los judíos?",
            "answers": [
                "Kosher.",
                "Mutár.",
                "Ojél."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Cómo se denomina la tradición oral de interpretación de la Torá? ",
            "answers": [
                "Torá sebealpé.",
                "Mishná.",
                "Torá miSinái."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Cómo se llama al dialecto judeoespañol empleado en la liturgia? ",
            "answers": [
                "Ladino.",
                "Haketía.",
                "Spaniolít."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Etimológicamente, ¿cuál es el significado de Béit Kenéset, la “Sinagoga”? ",
            "answers": [
                "Casa de Dios.",
                "Casa de rezo.",
                "Casa de reunión."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "¿Cómo se llama el armario en el que se guarda la Torá dentro de la sinagoga?",
            "answers": [
                "Arón Torá.",
                "Arón hakódesh.",
                "Hejal."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Qué festividad conmemora el éxodo de Egipto del pueblo hebreo o de los hijos de Israel? ",
            "answers": [
                "El Pesaj.",
                "Sucot.",
                "Shavuót."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Cuál es la celebración más sagrada para los judíos? ",
            "answers": [
                "Yom Kippur. ",
                "El Shábat. ",
                "Pesaj."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Cómo se llaman los baños rituales que practican los judíos? ",
            "answers": [
                "Los mikvaót.",
                "Brejá.",
                "Baño judío."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Qué nombre reciben  las pequeñas cajitas alargadas clavadas en el umbral derecho de las casas judías? ",
            "answers": [
                "Mezuzot.",
                "Berajá.",
                "Shemá."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "¿Qué operación quirúrgica practican los judíos a sus recién nacidos? ",
            "answers": [
                "Brít Shém.",
                "Circuncisión.",
                "Avrahám."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "¿Quiénes pueden realizar las lecturas en la sinagoga? ",
            "answers": [
                "Cualquier varón con más de 18 años.",
                "Cualquier hombre casado.",
                "Cualquier varón mayor de 13 años."
            ],
            "correctAnswer": "3",
        }
    ],
    "en": [
        {
            "question": "Where do the Jews come from?",
            "answers": [
                "From the Middle East.",
                "From Egypt. ",
                "From Sinai."
            ],
            "correctAnswer": "1",
        },
        {
            "question":"What is the name of the Jewish exodus after the destruction of the second temple in Jerusalem? ",
            "answers": [
                "The Roman Diaspora.",
                "The Second Diaspora.",
                "The Babylonian Diaspora. "
            ],
            "correctAnswer":"2",
        },
        {
            "question": "In which city was the first epigraphic evidence of the Jewish presence in Spain found?",
            "answers": [
                "In Adra.",
                "In Tortosa.",
                "In Mérida, on the tombstone of a Jew named Iustinus. "
            ],
            "correctAnswer": "3",
        },
        {
            "question": "Since when was there an important Jewish community in Spain already coexisting with the Christian one?",
            "answers": [
                "Since the 2nd century. ",
                "Since the 4th century.",
                "Since the 5th century."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "What is the meaning of the term Sepharad? ",
            "answers": [
                "It is the name given by Hispano-Jews to the Iberian Peninsula.",
                "It means land.",
                "It means separated (from their homeland)."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "When were the first measures and prohibitions against the Jews enacted?",
            "answers": [
                "In the 8th century. ",
                "At the time of the Catholic Monarchs. ",
                "In Visigothic times."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "Did the Muslims allow the Jews to keep their religion and traditions?",
            "answers": [
                "They have imposed the Jews harsh conditions.",
                "Yes.",
                "No."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Which of these cities has two beautiful Jewish synagogues? ",
            "answers": [
                "Toledo.",
                "Segovia.",
                "Córdoba."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "What were the Jewish neighborhoods called? ",
            "answers": [
                "Ghetto.",
                "Jewish quarters. ",
                "Aljamas."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "What measures did the first Christian kings take towards the Jews?",
            "answers": [
                "They forced the Jews to wear different clothes.",
                "They forced them to live outside the city wall.",
                "They protected them, even considering them as royal property."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "In what year did the persecutions that devastated many Jewish quarters take place?",
            "answers": [
                "In 1291.",
                "In 1483.",
                "In 1391."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "What were those Jews accused of not having truly converted to Christianity called?",
            "answers": [
                "False converts.",
                "Marranos.",
                "New Christians."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "When was the Edict of Expulsion of the Catholic Monarchs?",
            "answers": [
                "In 1482.",
                "In 1492.",
                "In 1391."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Which one of these Portuguese towns welcomed a large number of Jews after their expulsion from Spain? ",
            "answers": [
                "Lisbon.",
                "Castelo de Vide. ",
                "Guarda."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "How many times a day do Jews pray? ",
            "answers": [
                "Three.",
                "Two.",
                "One."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "What aspects does the Talmud deal with? ",
            "answers": [
                "It explains the Bible.",
                "It treats aspects of Jewish religious life. ",
                "It treats and regulates everyday aspects of Jewish life. "
            ],
            "correctAnswer": "3",
        },
        {
            "question": "What is the name of the food forbidden by the Jews? ",
            "answers": [
                "Kosher.",
                "Taref.",
                "Asúr."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "What is the name of the food allowed by the Jews? ",
            "answers": [
                "Kosher.",
                "Mutár.",
                "Ojél."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "What is the oral tradition of interpretation of the Torah called? ",
            "answers": [
                "Torá sebealpé.",
                "Mishná.",
                "Torá miSinái."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "What is the name of the Judeo-Spanish dialect used in the liturgy? ",
            "answers": [
                "Ladino.",
                "Haketía.",
                "Spaniolít."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Etymologically, what is the meaning of bet-ha-kneset, the \"synagogue\"? ",
            "answers": [
                "House of God.",
                "House of prayer.",
                "House of assembly."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "What is the name of the cabinet where the Torah is kept inside the synagogue? ",
            "answers": [
                "Arón Torá.",
                "Arón hakódesh.",
                "Hejal."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Which festivity commemorates the Exodus from Egypt of the Jewish people or the children of Israel? ",
            "answers": [
                "Pesach.",
                "Sucot.",
                "Shavuót."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "What is the most sacred celebration for Jews?",
            "answers": [
                "Yom Kippur. ",
                "Sabbath. ",
                "Pesaj."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "What is the name of the ritual bath of the Jews?",
            "answers": [
                "Los mikvaót.",
                "Brejá.",
                "Jewish bath."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "What is the name of the small elongated boxes nailed to the right threshold of Jewish houses?",
            "answers": [
                "Mezuzot.",
                "Berajá.",
                "Shemá."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "What surgical operation do Jews perform on their newborns? ",
            "answers": [
                "Brít Shém.",
                "Circumcisión.",
                "Avrahám."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Who can read in the synagogue? ",
            "answers": [
                "Any male over 18 years of age. ",
                "Any married man.",
                "Any male over 13 years of age. "
            ],
            "correctAnswer": "3",
        }
    ],
    "pt": [
        {
            "question": "De onde vem os judeus? ",
            "answers": [
                "Do Próximo Oriente.",
                "Do Egipto.",
                "Do Sinai."
            ],
            "correctAnswer": "1",
        },
        {
            "question":"Que nome recebe o Êxodo judeu depois da destruição do segundo templo de Jerusalém?",
            "answers": [
                "A Diáspora Romana.",
                "A Segunda Diáspora. ",
                "A Diáspora de Babilónia."
            ], 
            "correctAnswer":"2",
        },
        {
            "question": "Em que cidade se encontrou a primeira prova epigráfica da presença judaica em Espanha?",
            "answers": [
                "Em Adra.",
                "Em Tortosa.",
                "Em Mérida, na lápide dum judeu chamado Iustinus."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "A partir de que século existia já uma importante comunidade judaica em Espanha, coexistendo com a cristã?",
            "answers": [
                "Desde o século II.",
                "Desde o século IV.",
                "Desde o século V."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Que significa o termo Sefarad? ",
            "answers": [
                "É o nome que os hispano-judeus davam à Península Ibérica.",
                "Significa \"terra\".",
                "Significa \"separados\" (da sua pátria)."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Quando se promulgaram as primeiras medidas e proibições contra os judeus?",
            "answers": [
                "No século VIII.",
                "Na época dos Reis Católicos.",
                "Na época visigoda."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "Os muçulmanos permitiram aos judeus conservarem a sua religão, usos e costumes?",
            "answers": [
                "Impuseram-lhes condições muito duras.",
                "Sim.",
                "Não."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Em que cidade existem duas belas sinagogas judaicas? ",
            "answers": [
                "Toledo.",
                "Segóvia.",
                "Córdoba."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Que nome recebem os bairros judeus?",
            "answers": [
                "Gueto.",
                "Judiarias.",
                "Aljamas."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Que medidas tomaram os primeiros reis cristãos no que respeita aos judeus? ",
            "answers": [
                "Obrigavam-nos a levar outra vestimenta.",
                "Tinham que viver fora da cidade amuralhada.",
                "Protegiam-nos e, inclusivamente, consideravam-nos propriedade real."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "Em que ano se produziram as perseguições que arrasaram com muitas judiarias?",
            "answers": [
                "Em 1291.",
                "Em 1483.",
                "Em 1391."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "Como eram conhecidos aqueles judeus acusados de não se terem convertido verdadeiramente ao cristianismo? ",
            "answers": [
                "Falsos conversos.",
                "Marranos.",
                "Novos cristãos."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Em que ano teve lugar o Édito de Expulsão dos Reis Católicos?",
            "answers": [
                "Em 1482.",
                "Em 1492.",
                "Em 1391."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Qual destas localidades portuguesas acolheu um grande número de judeus depois da sua expulsão de Espanha?",
            "answers": [
                "Lisboa.",
                "Castelo de Vide. ",
                "Guarda."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Quantas vezes ao dia rezam os judeus? ",
            "answers": [
                "Três.",
                "Duas.",
                "Uma."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Que aspectos trata o Talmude? ",
            "answers": [
                "Explica a Bíblia.",
                "Só trata aspectos da vida religiosa judaica.",
                "Contempla e regula os aspectos quotidianos da vida judaica."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "Que nome recebem os alimentos proibidos pelos judeus?",
            "answers": [
                "Kosher",
                "Taref.",
                "Asúr."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Que nome recebem os alimentos permitidos pelos judeus?",
            "answers": [
                "Kosher.",
                "Mutár.",
                "Ojél."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Como se denomina a tradição oral de interpretação da Torá?",
            "answers": [
                "Torá sebealpé.",
                "Mishná.",
                "Torá miSinái."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Como se chama o dialecto judeuespanhol usado na liturgia?",
            "answers": [
                "Ladino.",
                "Haketía.",
                "Spaniolít."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Etimologicamente, qual é o significado de Béit Kenéset, a \"sinagoga\"? ",
            "answers": [
                "Casa de Deus",
                "Casa de rezo.",
                "Casa de reunião."
            ],
            "correctAnswer": "3",
        },
        {
            "question": "Como se chama o armário em que se guarda a Torá dentro da sinagoga?",
            "answers": [
                "Arón Torá.",
                "Arón hakódesh.",
                "Hejal."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Que festividade comemora o Êxodo do Egipto do povo hebreu ou o dos filhos de Israel?",
            "answers": [
                "Pessach.",
                "Sucot.",
                "Shavuót."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Qual é a celebração mais sagrada para os judeus?  ",
            "answers": [
                "Yom Kippur. ",
                "O Shabbat. ",
                "Pessach."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Como se chamam o banho ritual que praticam os judeus?",
            "answers": [
                "Mikvah.",
                "Brejá.",
                "Banho judeu."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Que nome recebem as pequenas caixas que existem no umbral direito das casas judaicas? ",
            "answers": [
                "Mezuzot.",
                "Berajá.",
                "Shemá."
            ],
            "correctAnswer": "1",
        },
        {
            "question": "Que operação cirúrgica praticam os judeus aos seus recém nascidos? ",
            "answers": [
                "Brít Shém.",
                "Circuncisão.",
                "Avrahám."
            ],
            "correctAnswer": "2",
        },
        {
            "question": "Quem pode realizar leituras na sinagoga? ",
            "answers": [
                "Qualquer varão com mais de 18 anos.",
                "Qualquer homem casado.",
                "CQualquer varão com mais de 13 anos."
            ],
            "correctAnswer": "3",
        }
    ]
}

var results = {
    "es": {
        0:"principiante",
        1:"avanzado",
        2:"experto"

    }, 
    "en": {
        0:"beginner",
        1:"advanced",
        2:"expert"

    }, "pt": {
        0:"iniciante",
        1:"avançado",
        2:"especialista"
    }
}

var questions;
var choices;
var locale;
var correct = 0;
var unanswered = 0;
var keyPressedEventActive = false;
var correctFlag = false;
var $totalOptions = 0;
let timePassed = 0;
let timeLeft = config.TIME_LIMIT;
let timerInterval = null;

$(document).ready(function () {
    $('.fadeOnLoad').delay(2000).removeClass('hide').hide().fadeIn('slow');
});

document.addEventListener("keydown", KeyPressedHandler);

function launchQuiz() {
    questions = questions.slice(0, config.TOTAL_QUESTIONS);
    $('#timer').toggleClass('hide');
    $('#language-container').toggleClass('hide');
}

function shuffleQuestions(locale) {
    var sortedQuestions = [];
    var localeQuestions = allQuestionsFromQuiz[locale];
    for (var i in localeQuestions) {
        sortedQuestions.push([i, localeQuestions[i]]);
    }
    questions = shuffle(sortedQuestions);

    return sortedQuestions;

}

function unansweredQuestion() {
    unanswered++;

    if (unanswered > config.UNANSWERED_QUESTIONS_TOTAL) {
        destroyTimer();
        endGame();
    } else {
        clearQuestion();
        showNextQuestion();
    }

}

function showNextQuestion() {
    $('#selector-container').delay(2000).removeClass("hide").hide().fadeIn(1000);
    $('#timer').removeClass("hide").hide().fadeIn(1000, () =>{
        createTimer();
        startTimer();
    });
    console.log(questions);
    var currentQuestion = questions.pop()[1];
    console.log(currentQuestion);
    var choices = currentQuestion.answers;
    $('#question-text').append(currentQuestion.question);

    for (let index = 0; index < Object.keys(choices).length; index++) {
        optionNumber = index+1;
        $("#option-" + (optionNumber) + "-container").children('span').text(choices[index]);
    }

    $('#answer').append(currentQuestion.correctAnswer);
}

function resolveQuestion(e) {
    destroyTimer()
    keyPressedEventActive = false;
    var keyPressed = e.key;
    unanswered = 0;

    var correctAnswer = $('#answer').text();

    if (keyPressed == correctAnswer) {
        correct++;
        correctFlag = true;
    }
    $totalOptions = $("[id*=option-]").length;

    for (let index = 0; index <= $totalOptions; index++) {
            optionNumber = index+1;
            $("#option-" + optionNumber + "-container").addClass(optionNumber == keyPressed ? 'selected': 'inactive');
    }

    for (let index = 0; index <= $totalOptions; index++) {
            optionNumber = index+1;
            $("#option-" + optionNumber + "-container").delay(2000).addClass(optionNumber== correctAnswer ?'fa fa-check correct ' : 'fa fa-times wrong');
    }
    $('#selector-container').delay(2000).fadeOut(1000, () => {
        clearQuestion();
        if (questions.length != 0) {
            showNextQuestion();
        } else {
            endGame();
        }
    });
}

function showResults() {
    $('#solution-container').delay(2000).removeClass('hide').hide().fadeIn(1000);
    var result = correct / config.TOTAL_QUESTIONS;
    var textResult = '';
    var faceClass = '';
    if (result <= 0.33) {
        textResult = results[locale][0];
        faceClass = 'newbie';
    } else if (result <= 0.66) {
        textResult = results[locale][1];
        faceClass = 'intermediate';
    } else if (result >= 0.67) {
        textResult = results[locale][2];
        faceClass = 'advanced';
    }
    $('#solution-container').addClass(faceClass);
    $('#score').append(result * 100 + '%');
    $('#level').append(textResult);

    reloadQuiz(config.TIME_FOR_RELOAD)
}

function KeyPressedHandler(e) {
    if (!keyPressedEventActive) {
        keyPressedEventActive = true;
        if ($('#language-container.hide').length) {
            resolveQuestion(e);
        } else {
            locale = config.LANGUAGES[e.key];
            shuffleQuestions(locale);
            launchQuiz();
            showNextQuestion();
        }
        keyPressedEventActive = false;
    }
}

function endGame() {
    $('#selector-container').fadeOut(
        config.TIME_FOR_RELOAD,
        () => {
            $('#selector-container').empty()
        });
    showResults();
}

var  shuffle = (a) => {
    var j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}

var clearQuestion = () => {
    $('#question-text').empty();
    $totalOptions = $("[id*=option]").length;

    for (let index = 0; index <= $totalOptions; index++) {
            optionNumber = index+1;
        $("#option-" + optionNumber + "-container").children('span').text('');
        $("#option-" + optionNumber + "-container").removeClass('fa fa-check fa-times wrong correct inactive selected');
    }
    $('#answer').empty();
}

var  reloadQuiz = (time) => {
    $('#solution-container').fadeOut(time, () => {
        location.reload()
    })
}

function createTimer() {
    document.getElementById("timer").innerHTML = `
<div class="base-timer">
  <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
    <g class="base-timer__circle">
      <circle class="base-timer__path-elapsed" cx="50" cy="50" r="30"></circle>
      <path
        id="base-timer-path-remaining"
        stroke-dasharray="0"
        class="base-timer__path-remaining"
        d="
          M 50, 50
          m -30, 0
          a 30,30 0 1,0 60,0
          a 30,30 0 1,0 -60,0
        "
      ></path>
    </g>
  </svg>
  <span id="base-timer-label" class="base-timer__label">${formatTime(
    timeLeft
  )}</span>
</div>
`;
}

function onTimesUp() {
    clearInterval(timerInterval);
    timePassed = 0;
    unansweredQuestion();
}

function startTimer() {
  timerInterval = setInterval(() => {
    timePassed = timePassed += 1;
    timeLeft = config.TIME_LIMIT - timePassed;
    document.getElementById("base-timer-label").innerHTML = formatTime(
      timeLeft
    );
    setCircleDasharray();

    if (timeLeft === 0) {
      onTimesUp();
    }
  }, 1000);
}

function formatTime(time) {
  let seconds = time;

  if (seconds < 10) {
    seconds = `0${seconds}`;
  }

  return `${seconds}`;
}


function calculateTimeFraction() {
  const rawTimeFraction = timeLeft / config.TIME_LIMIT;
  return 1-(rawTimeFraction - (1 / config.TIME_LIMIT) * (1 - rawTimeFraction));
}

function setCircleDasharray() {
  const circleDasharray = `${(
    calculateTimeFraction() * config.FULL_DASH_ARRAY
  ).toFixed(0)} 189`;
  document
    .getElementById("base-timer-path-remaining")
    .setAttribute("stroke-dasharray", circleDasharray);
}

function destroyTimer() {
    clearInterval(timerInterval);
    timePassed = 0;
    $('#timer').empty();
}